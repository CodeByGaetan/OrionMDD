<h1>Profil utilisateur</h1>
<div class="userInfoContainer">
  <form [formGroup]="userForm" (ngSubmit)="updateUser()">
    <mat-form-field appearance="outline">
      <mat-label>Nom d'utilisateur</mat-label>
      <input matInput id="name" formControlName="name" />
      <mat-hint *ngIf="codeError === 2 || codeError === 3">Nom d'utilisateur déjà utilisé</mat-hint>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>E-mail</mat-label>
      <input matInput id="email" formControlName="email" />
      <mat-hint *ngIf="codeError === 1 || codeError === 3">Email déjà utilisé</mat-hint>
    </mat-form-field>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="userForm.invalid"
    >
      Sauvegarder
    </button>
    <p *ngIf="generalErrorUser" class="error">Erreur lors de la mise à jour de l'utilisateur</p>
    <button mat-button (click)="logOut()">Se déconnecter</button>
  </form>
</div>

<mat-divider></mat-divider>

<h1>Abonnements</h1>

<p *ngIf="onErrorTopics" class="error">Erreur lors de la récupération de la liste des abonnements</p>
<div class="topicsContainer">
  <mat-card *ngFor="let topic of topics">
    <mat-card-title>{{ topic.title }}</mat-card-title>
    <mat-card-content>{{ topic.description }}</mat-card-content>
    <div class="spacer"></div>
    <button mat-raised-button color="warn" (click)="unSubscribe(topic.id)">
      Se désabonner
    </button>
  </mat-card>
</div>
